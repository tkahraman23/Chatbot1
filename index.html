<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ElectroZirve â€“ Chat</title>
  <style>
    html,body{height:100%;margin:0;background:#fff;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  </style>
</head>
<body>
  <ez-faq-chat></ez-faq-chat>          

  <script>
  (function(){
    class EZSSSohbet extends HTMLElement{  
      constructor(){           
        super();             
        this.attachShadow({mode:'open'}); 
        this.ayar = {          
          sirketAdi: 'ElektroZirve',
          baslik: 'HÄ±zlÄ± YanÄ±t',
          konum: 'right',             
          yukseklik: '70vh',
          genislik: '480px',
          topIkonUrl: "/assets/img/robot_ikon.png",       
          logoYolu: "/assets/img/ez-logo.png",
          sohbetArkaPlanYolu: "/assets/img/arka_plan.png",
          tema: {
            anaRenk: '#0a7a20',
            yuzey: 'linear-gradient(180deg, #106e2b 0%, #065f00 100%)',
            yazi: '#f1f5f9',
            kenar: 'rgba(209,250,229,.25)',               
            perde: 'rgba(0,0,0,.28)',
            kullaniciBalon: '#e8f5e9',
            kullaniciYazi: '#0f3d17',
            botBalon: 'rgba(255,255,255,.10)'

          },
          kategoriler: [],          
        };
        this.durum = { acik:false, gorunum:'ana', karsilamaEklendi:false };  
      }

      connectedCallback(){
        if(window.__EZ_SOHBET_AYAR__){ this.ayarla(window.__EZ_SOHBET_AYAR__); }  
        this.ciz();
      }

      ayarla(yeni){ this.ayar = derinBirlestir(this.ayar, yeni||{}); }         

    ciz(){
  const t = this.ayar.tema;
  const yanBosluk = this.ayar.konum==='left'
    ? 'inset:auto auto 16px 16px'
    : 'inset:auto 16px 16px auto';
  const panelYani = this.ayar.konum==='left'
    ? 'left:0; right:auto;'
    : 'right:0; left:auto;';

  this.shadowRoot.innerHTML = `
        
    <style>

            :host{                 
            position:fixed;       
            ${yanBosluk};         
            z-index:9999;        
            font-family:inherit; 
            font-size:14px;
            }

            .top{                  
              width:68px;          
              height:68px;           
              border-radius:9999px;   
              border:none;           
              cursor:pointer;        
              background:${t.anaRenk}; 
              display:grid;  place-items:center;   
              box-shadow:0 12px 28px rgba(0,0,0,.35);
              overflow:hidden 
            }

            .top:hover{         
            transform:translateY(-2px);          
            box-shadow:0 18px 36px rgba(0,0,0,.45)}   

            .top-resim{   
            width:100%;    
            height:100%;  
            object-fit:cover;  
            pointer-events:none} 

            .kaplama{ 
            position:fixed;   
            inset:0;
            background:${t.perde};
            opacity:0;
            pointer-events:none;
            transition:opacity .25s}

            :host(.acik) .kaplama{  
            opacity:1;              
            pointer-events:none;}  

            .panel{         
              position:fixed;     
              bottom:0;        
              ${panelYani}; 
              height:${this.ayar.yukseklik}  
              ;width:min(${this.ayar.genislik}, 92vw); 
              background:${t.yuzey};   
              color:${t.yazi};        
              border:1px solid ${t.kenar}; 
              transform:translateY(105%); 
              transition:transform .32s;  
              display:flex;             
              flex-direction:column;  
              border-top-left-radius:20px;   
              border-top-right-radius:20px 
            }

            :host(.acik) .panel{     
            transform:translateY(0)} 

            
           .secenek{
           transition: transform .08s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
           box-shadow: 0 6px 12px rgba(0,0,0,.14);
          }
          .secenek:hover{ transform: translateY(-1px); box-shadow: 0 8px 18px rgba(0,0,0,.18); }
          .secenek:active{ transform: translateY(0);   box-shadow: 0 3px 8px rgba(0,0,0,.18); }

          
.ez-typing{
  display:inline-flex; gap:6px; align-items:center;
  padding:10px 12px; border-radius:12px;
  border:1px solid rgba(209,250,229,.25);
  background: rgba(255,255,255,.08);
}
.ez-typing i{
  width:6px; height:6px; border-radius:50%;
  background: rgba(255,255,255,.85);
  display:inline-block; animation: ez-blink 1s infinite;
}
.ez-typing i:nth-child(2){ animation-delay:.15s }
.ez-typing i:nth-child(3){ animation-delay:.3s }
@keyframes ez-blink{
  0%, 80%, 100% { opacity:.2; transform: translateY(0); }
  40%          { opacity:1;  transform: translateY(-2px); }
}
.sr-only{
  position:absolute !important; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

            .ust{                     
              display:flex;          
              align-items:center;   
              gap:10px;              
              padding:12px 14px; 
              background:linear-gradient(135deg, rgba(34,197,94,.28), rgba(6,95,0,.55)); 
              border-bottom:1px solid ${t.kenar} 
            }
            .logo{             
              width:36px; 
              height:36px;        
              border-radius:9999px;  
              background:#fff;       
              color:${t.anaRenk};         
              border:1px solid ${t.kenar};   
              display:grid;                   
              place-items:center;            
              overflow:hidden;               
              box-shadow:0 6px 18px rgba(0,100,0,.15)
            } 
            .logo img{              
            width:100%;
            height:100%;            
            object-fit:contain}
 
            .baslik{
            font-size:16px;
            font-weight:700} 

            .kapat{                
              margin-left:auto;
              background:transparent;
              border:1px solid rgba(255,255,255,.30); 
              border-radius:9999px; 
              width:36px;       
              height:36px; 
              display:grid;      
              place-items:center; 
              cursor:pointer;  
              color:#fff 
            }

            .kapat:hover{      
            border-color:rgba(255,255,255,.60);   
            background:rgba(255,255,255,.06) } 

            .kapat svg{
            width:18px; 
            height:18px }

            .icerik{
            display:flex;
            flex-direction:column;
            flex:1;             
            min-height:0} 

            .kaydir{             
              --bg-size: clamp(360px, 80%, 680px);   
              --scroll-track: #a7f3d0; 
              --scroll-thumb: #064e3b; 
              flex:1; 
              min-height:0; 
              overflow-y:auto; 
              padding:12px 12px 8px 12px;
              background-image: 
                linear-gradient(160deg, rgba(16,110,43,0.88), rgba(6,95,0,0.92)),
                url("${this.ayar.sohbetArkaPlanYolu}");          
              background-repeat:no-repeat,no-repeat;           
              background-position:center,center;             
              background-size:cover,var(--bg-size) auto; 
              background-attachment:fixed,fixed;
              scrollbar-width:thin; 
              scrollbar-color:var(--scroll-thumb) var(--scroll-track) 
            }
            .kaydir::-webkit-scrollbar{
             width:12px }               

             .kaydir::-webkit-scrollbar-track{ 
            background:var(--scroll-track); border-radius:10px }   

            .kaydir::-webkit-scrollbar-thumb{           
              background:var(--scroll-thumb);       
              border-radius:10px;                     
              border:2px solid var(--scroll-track); 
              min-height:64px                       
            }
            .kaydir::-webkit-scrollbar-thumb:hover{
             filter:brightness(1.12) }                   

            .mesajlar{       
            display:flex;          
            flex-direction:column;  
            gap:8px}            

            .satir{
            display:flex;   
            gap:8px}

            .satir.kullanici{
            justify-content:flex-end}

            .avatar{
            width:28px;  
            height:28px; 
            border-radius:999px;
            background:#fff; 
            border:1px solid ${t.kenar};
            display:grid;              
            place-items:center;
            color:${t.anaRenk}; 
            flex:0 0 28px;
            overflow:hidden}

            .avatar img{ 
            width:100%;
            height:100%;
            object-fit:cover;
            }   
 
            .balon{       
            max-width:92%; 
            padding:10px 12px;
            border-radius:14px;
            border:1px solid ${t.kenar};
            background:${t.botBalon};
            color:${t.yazi}} 
 
            .satir.kullanici .balon{             
            background:${t.kullaniciBalon};    
            color:${t.kullaniciYazi};   
            border-color:rgba(16,185,129,.35); 
           } 

            .secenekler{   
            display:grid; 
            grid-template-columns:1fr;
            gap:8px;           
            margin-top:8px}
            .secenek{       
            width:100%;         
            text-align:left;     
            background:rgba(255,255,255,.10);
            border:1px solid ${t.kenar};   
            padding:10px 12px;    
            border-radius:12px;   
            cursor:pointer}    

            .secenek:hover{
              border-color:rgba(255,255,255,.5)}  

            .alt{       
            border-top:1px solid ${t.kenar}; 
            padding:10px 12px;  
            display:flex;
            gap:8px; 
            background:linear-gradient(180deg, rgba(0,0,0,.06), rgba(0,0,0,.12))} 
            
            .anaMenu{   
            width:100%;    
            background:${t.anaRenk}; 
            color:#fff;     
            border:none;         
            border-radius:12px;   
            padding:12px 14px;     
            font-size:14px;       
            cursor:pointer}  

            .anaMenu:disabled{  
            opacity:.55;
            cursor:not-allowed} 

            .gb-ico{
            width:16px;
            height:15px;
            display:inline-block;
            object-fit:contain; 
            }          
.geri-satir{ justify-content:center; }

.geri-bar{
  margin:0px 0 4px;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(209,250,229,.25);
  border-radius:10px;
  padding:4px;
  width:min(100%, 560px);
  display:flex;
  gap:4px;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;           
}
  .geri-satir{
  justify-content:flex-start;             
  padding-left: calc(28px + 8px);           
  padding-right: 0;                        
}

.geri-bar{
  width: 100%;                              
  max-width: 100%;                     
}


.gb-label{
  flex:0 0 100%;            
  order:-1;                 
  margin:0 0 0px 0;
  padding:0 2px;
  font-size:14px;
  opacity:.9;
display:grid;                        
              place-items:center;}
.gb-inline{
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  padding:9px 12px;
  border-radius:10px;
  border:1px solid rgba(209,250,229,.25);
  background:rgba(255, 255, 255, .10);
  color:#fff;
  cursor:pointer;
  min-height: 34px;
  text-align: center;
  max-height: 1px;
}

.gb-inline:hover{ border-color:rgba(255,255,255,.5); }
.gb-inline svg{ width:16px; height:16px }

.gb-not{
  font-size:12px;
  opacity:.9;
  padding:6px 8px;
}

@media (max-width:640px){
  .gb-inline{ padding:8px 10px; font-size:13px }
}


  .top-hint {
  font: 600 13px / 1.1 Inter, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  text-align: center;
  position: absolute;
  right: 7px;
  top: inherit;
  bottom: 78px;
  width: min(285px, 70vw);
  padding: 10px 5px;
  background: #017a13;
  color:white;
  border-radius:12px;
  box-shadow:0 10px 24px rgba(0,0,0,.22);
  border:1px solid rgba(0,0,0,.06);
  opacity:0; transform:translateY(6px);
  pointer-events:none;
  transition:opacity .25s, transform .25s;
  z-index:10000;
}
.top-hint.goster{
  opacity:1; transform:translateY(0);
  pointer-events:auto;
}
.top-hint::after{
  content:"";
  position:absolute;
  right:18px;
  bottom:-8px;
  border-top:8px solid green;
  border-left:8px solid transparent;
  border-right:8px solid transparent;
}
:host(.acik) .top-hint{ display:none }  
@media (max-width:640px){
  .top-hint{ bottom:70px; max-width:min(240px, 80vw); }
}
.top-hint .hint-close{
  position:absolute;
  top:-1px; right:2px;
  width:22px; height:22px;
  display:grid; place-items:center;
  background:transparent;
  border:0; border-radius:9999px;
  color:#fff; font-size:16px; line-height:1;
  cursor:pointer; opacity:.9;
}
.top-hint .hint-close:hover{
  background:rgba(255,255,255,.12);
}
.top-hint{ cursor: pointer; }

.ez-callback{ display:flex; flex-direction:column; gap:10px; }
.cb-grup{ display:flex; flex-direction:column; gap:6px; }
.cb-grup input, .cb-grup select, .cb-grup textarea{
 padding:10px 12px; border-radius:10px;
  border:1px solid rgba(209,250,229,.25);
  background:rgba(255,255,255,.10); color:#fff; outline:none;
}
.cb-grup input::placeholder, .cb-grup textarea::placeholder{ color:rgba(255,255,255,.7); }
.cb-yan{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.cb-onay{ display:flex; align-items:flex-start; gap:8px; font-size:13px; opacity:.9; }
.cb-gonder{
  background:#10b981; color:#0b241b; border:1px solid rgba(209,250,229,.25);
  padding:10px 12px; border-radius:10px; cursor:pointer; font-weight:600;
}
.cb-gonder:disabled{ opacity:.6; cursor:not-allowed; }
@media (max-width:640px){ .cb-yan{ grid-template-columns:1fr; } }
.satir.bot .balon a,
.satir.bot .balon a:visited{
  color:#00206b !important;
  text-decoration:underline;
  text-underline-offset:2px;
  text-decoration-thickness:1.5px;
  font-weight: bold;
}

          </style>

          <button class="top" id="top" aria-controls="panel" aria-expanded="false" title="Dijital Asistan" aria-label="Dijital Asistan">   
            ${this.ayar.topIkonUrl ? `<img class="top-resim" src="${this.ayar.topIkonUrl}" alt="">` : ``}       
          </button>     
          <div class="kaplama" id="kaplama" aria-hidden="true"></div>

          <aside id="panel" class="panel" role="dialog" aria-modal="false" aria-hidden="true">

            <div class="ust">
              <div class="logo" aria-hidden="true">
                ${this.ayar.logoYolu ? `<img src="${this.ayar.logoYolu}" alt="${htmlKacir(this.ayar.sirketAdi)} logo">` : 'EZ'}
              </div>

              <div class="baslik">${htmlKacir(this.ayar.sirketAdi)} â€“ ${htmlKacir(this.ayar.baslik)}</div>

              <button class="kapat" id="kapat" aria-label="Kapat" title="Kapat" type="button">
                <svg viewBox="0 0 24 24" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
                  <path d="M6 6l12 12M18 6l-12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
            </div>

            <div class="icerik">
              <div class="kaydir" id="kaydir"><div class="mesajlar" id="mesajlar"></div></div>

              <div class="alt"><button id="anaMenu" class="anaMenu" type="button">ğŸ”„ Ana MenÃ¼ye DÃ¶n</button></div>

            </div>
          </aside>
        `;

        this.$top = this.shadowRoot.getElementById('top');
        this.$kaplama = this.shadowRoot.getElementById('kaplama');
        this.$panel = this.shadowRoot.getElementById('panel');
        this.$kapat = this.shadowRoot.getElementById('kapat');               
        this.$mesajlar = this.shadowRoot.getElementById('mesajlar');
        this.$kaydir = this.shadowRoot.getElementById('kaydir');
        this.$anaMenu = this.shadowRoot.getElementById('anaMenu');

        this.$top.addEventListener('click', ()=> { this.ac(); this.karsilamaGerekirse(); });
        this.$kaplama.addEventListener('click', ()=> this.kapa());
        this.$kapat.addEventListener('click', ()=> this.kapa());                
        this.$anaMenu.addEventListener('click', ()=> this.anaMenuyeDon());

        
        this.$hint = document.createElement('div');
        this.$hint.className = 'top-hint';
        this.$hint.setAttribute('role','status');
        this.$hint.textContent = (this.ayar.hintMetni || 'Size yardÄ±mcÄ± olabileceÄŸim konuyu seÃ§ebilirsiniz.');
        this.shadowRoot.appendChild(this.$hint);
        
       this.$hint.addEventListener('click', (e) => {
       if (e.target.closest('.hint-close')) return;  
       this.ac();
       this.karsilamaGerekirse();
      try { sessionStorage.setItem('EZ_HINT_SHOWN','1'); } catch(_){}
      });

        this.baslatGecikmeliIpucu(); 
        
const x = document.createElement('button');
x.className = 'hint-close';
x.setAttribute('aria-label','Kapat');
x.innerHTML = '&times;';
this.$hint.appendChild(x);
x.addEventListener('click', () => {
  this.ipucuGizle();
  try { sessionStorage.setItem('EZ_HINT_SHOWN','1'); } catch(_){}
});
        this.baslatGecikmeliIpucu(); 

      }

      karsilamaGerekirse(){
        if(this.durum.karsilamaEklendi) return;        
        if(!this.ayar.kategoriler?.length) return;     
        this.karsilamaEkle();                          
        this.durum.karsilamaEklendi = true;            
      }

      karsilamaEkle(){
        this.geriButonGuncelle();  
        this.botEkle("Merhaba, sana yardÄ±mcÄ± olmamÄ± istediÄŸin kategoriyi seÃ§ebilir misin?", {    
          secenekler: this.ayar.kategoriler.map((k,i)=>({etiket:k.ad, tik:()=> this.kategoriSec(i)}))     
        });
        this.altaKaydir();     
      }

  async kategoriSec(i){
  const kat = this.ayar.kategoriler[i]; if(!kat) return;

  
  if (kat.formKat === 'callback') {
    this.durum.gorunum = 'cevap';
    this.geriButonGuncelle();
    this.kullaniciEkle(kat.ad);
    await this.yaziyorGoster(500);
    this.geriAramaFormu();
    return;
  }

  
  this.durum.gorunum = 'kategori';
  this.geriButonGuncelle();
  this.kullaniciEkle(kat.ad);

  const ogeList = kat.sss || [];
  await this.yaziyorGoster(500);

  this.botEkle("Yapmak istediÄŸin iÅŸlemi seÃ§er misin?", {
    secenekler: ogeList.map(s => ({ etiket: s.s, tik: () => this.soruSec(kat, s) }))
  });

  
  
}

   async urunAltSec(altKat){
    this.durum.gorunum = 'urun-alt';
    this.geriButonGuncelle();
    this.kullaniciEkle(altKat.s);
    await this.yaziyorGoster(500);

    this.botEkle("Bir soru seÃ§in:", {
    secenekler: (altKat.alt || []).map(q => ({ etiket: q.s, tik: () => this.soruSec(altKat, q) }))
  });
}

async soruSec(kat, sss){
  
  if (sss?.form === 'callback') {
    this.durum.gorunum = 'cevap';
    this.geriButonGuncelle();
    this.kullaniciEkle(sss.s);
    await this.yaziyorGoster(500);
    this.geriAramaFormu();
    return;
  }
  this.altaKaydir({ force: true });
requestAnimationFrame(()=> this.altaKaydir({ force: true }));
setTimeout(()=> this.altaKaydir({ force: true }), 60);

  
  
  if (Array.isArray(sss.alt) && sss.alt.length && sss.alt.some(x => Array.isArray(x.alt))) {
    this.durum.gorunum = 'urun-alt';
    this.geriButonGuncelle();
    this.kullaniciEkle(sss.s);

    await this.yaziyorGoster(420); 

    this.botEkle("ÃœrÃ¼n kategorisi seÃ§in:", {
      secenekler: sss.alt.map(oge => ({
        etiket: oge.s,
        tik: () => this.urunAltSec(oge)   
      }))
    });
    return; 
  }

  
  this.durum.gorunum = 'cevap';
  this.geriButonGuncelle();
  this.kullaniciEkle(sss.s);

  await this.yaziyorGoster(1500); 
  await this.botType(sss.c);      
  this.geriBildirimSatir();
}

      satirEkle(taraf, html){
        const satir = document.createElement('div'); satir.className = `satir ${taraf}`;     
        if(taraf==='bot'){
          const av = document.createElement('div'); av.className = 'avatar';   
          if(this.ayar.logoYolu){
            const img = document.createElement('img');
            img.src = this.ayar.logoYolu; img.alt = (this.ayar.sirketAdi||'') + ' logo';    
            av.appendChild(img); 
          }                                   
          satir.appendChild(av);
        }
        const balon = document.createElement('div'); balon.className='balon'; balon.innerHTML=html;   
        satir.appendChild(balon);                                 
        this.$mesajlar.appendChild(satir);      
        this.altaKaydir();              
        return balon;              
      }
      
async botType(html, o={}){
  
  const satir = document.createElement('div'); satir.className='satir bot';
  const av = document.createElement('div'); av.className='avatar';
  if(this.ayar.logoYolu){ const img=document.createElement('img'); img.src=this.ayar.logoYolu; img.alt=''; av.appendChild(img); }
  const balon = document.createElement('div'); balon.className='balon';
  satir.append(av, balon);
  this.$mesajlar.appendChild(satir);
  requestAnimationFrame(()=> satir.classList.add('play')); 
  this.altaKaydir({force:true});

  
  const rMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  
  const tmp = document.createElement('div'); tmp.innerHTML = html;

  
  const caret = document.createElement('span'); caret.className='ez-caret';
  balon.appendChild(caret);

  
  const speed = Math.max(4, Number(this.ayar?.typeSpeed) || 20);   
  const punctExtra = Number(this.ayar?.typePunctHold) || 160;      
  let _skip = false;

  
  const skipAll = ()=>{ _skip = true; };
  balon.addEventListener('click', skipAll, {once:true});

  const sleep = (ms)=> new Promise(r=> setTimeout(r, ms));

  
  const cloneAttrs = (src, dst)=>{
    for(const a of src.attributes){
      const n = a.name.toLowerCase();
      if(n.startsWith('on')) continue;
      dst.setAttribute(n, a.value);
    }
  };

  const typeNode = async (node, parent)=>{
    if(_skip) return;
    if(node.nodeType === Node.TEXT_NODE){
      const full = node.nodeValue || '';
      if(rMotion || _skip){ parent.append(full); return; }
      const span = document.createElement('span'); parent.appendChild(span);
      for(let i=1;i<=full.length;i++){
        if(_skip){ span.textContent = full; break; }
        span.textContent = full.slice(0,i);
        const ch = full[i-1];
        const extra = /[.!?â€¦]/.test(ch) ? punctExtra : /[,;:]/.test(ch) ? Math.floor(punctExtra*0.5) : 0;
        await sleep(speed + extra);
        if(i % 3 === 0) this.altaKaydir({force:true});
      }
      return;
    }
    if(node.nodeType === Node.ELEMENT_NODE){
      const el = document.createElement(node.tagName);
      cloneAttrs(node, el);
      parent.appendChild(el);
      if(node.childNodes && node.childNodes.length){
        for(const child of Array.from(node.childNodes)){
          await typeNode(child, el);
          if(_skip) break;
        }
      }
      return;
    }
  };

  for(const child of Array.from(tmp.childNodes)){
    await typeNode(child, balon);
    if(_skip) break;
  }

  if(_skip){ balon.innerHTML = html; } 

  caret.remove();

  
  if(o?.secenekler?.length){
    const s = document.createElement('div'); s.className='secenekler';
    o.secenekler.forEach(ch=>{
      const btn = document.createElement('button'); btn.className='secenek'; btn.type='button'; btn.textContent=ch.etiket;
      btn.addEventListener('click', ()=> ch.tik());
      s.appendChild(btn);
    });
    balon.appendChild(s);
  }

  this.altaKaydir({force:true});
  return balon;
}

      

yaziyorGoster(ms = 500){
  
  if(this._typingNode){ try{ this._typingNode.remove(); }catch(_) {} }
  clearTimeout(this._typingTimer);

  

  const satir = document.createElement('div');
  satir.className = 'satir bot';
  const av = document.createElement('div'); av.className = 'avatar';
  if(this.ayar.logoYolu){
    const img = document.createElement('img'); img.src = this.ayar.logoYolu; img.alt = '';
    av.appendChild(img);
  }
  const balon = document.createElement('div'); balon.className = 'balon';
  
  const sr = document.createElement('span'); sr.className = 'sr-only'; sr.textContent = 'YazÄ±yorâ€¦';
  balon.appendChild(sr);
  
  const dots = document.createElement('span');
  dots.className = 'ez-typing'; dots.setAttribute('aria-hidden','true');
  dots.innerHTML = '<i></i><i></i><i></i>';
  balon.appendChild(dots);

  satir.append(av, balon);
  this.$mesajlar.appendChild(satir);
  this._typingNode = satir;
  this.altaKaydir();

  return new Promise(res=>{
    this._typingTimer = setTimeout(()=>{
      try{ satir.remove(); }catch(_){}
      this._typingNode = null;
      res();
    }, Math.max(0, ms));
  });
}

      botEkle(metin, o = {}){
  const balon = this.satirEkle('bot', `<div>${htmlKacir(metin)}</div>`);

  if(o.secenekler?.length){
    const s = document.createElement('div');
    s.className = 'secenekler';

    o.secenekler.forEach(ch=>{
      const btn = document.createElement('button');
      btn.className = 'secenek';
      btn.type = 'button';
      btn.textContent = ch.etiket;

      
      btn.addEventListener('click', ()=>{
        this.altaKaydir({ force:true });
        
        requestAnimationFrame(()=> this.altaKaydir({ force:true }));
        
        setTimeout(()=> ch.tik(), 0);
      });

      s.appendChild(btn);
    });

    balon.appendChild(s);

    
    this.altaKaydir({ force:true });
    requestAnimationFrame(()=> this.altaKaydir({ force:true }));
  }
}

      botHTML(html){return this.satirEkle('bot', html); }           
      kullaniciEkle(metin){ this.satirEkle('kullanici', htmlKacir(metin)); }   

      
geriAramaFormu(){
  const html = `
<form class="ez-callback" novalidate>
  <div class="cb-grup">
    <label>Ad Soyad </label>
    <input type="text" name="ad" placeholder="AdÄ±nÄ±z ve SoyadÄ±nÄ±z" autocomplete="name" required />
  </div>

  <div class="cb-grup">
    <label>Telefon NumaranÄ±z</label>
    <input type="tel" name="tel" placeholder="+90 5xx xxx xx xx" inputmode="tel" required />
  </div>

  <div class="cb-grup">
    <label>E-posta Adresiniz </label>
    <input type="email" name="email" placeholder="ornek@eposta.com" autocomplete="email" required />
  </div>

  <label class="cb-onay">
    <input type="checkbox" name="kvkk" required />
    AranmayÄ± ve verilerimin KVKK kapsamÄ±nda saklanmasÄ±nÄ± onaylÄ±yorum.
  </label>

      <div class="cb-alt">
        <button type="submit" class="cb-gonder">NumaramÄ± bÄ±rak</button>
      </div>
    </form>
  `;
this.altaKaydir({ force: true });
requestAnimationFrame(()=> this.altaKaydir({ force: true }));
setTimeout(()=> this.altaKaydir({ force: true }), 60);

  const balon = this.botHTML(html);
  const form = balon.querySelector('form.ez-callback');

form?.addEventListener('submit', async (e)=>{
  e.preventDefault();
  const fd = new FormData(form);
  const payload = {
    ad:    (fd.get('ad')||'').toString().trim(),
    tel:   this._normalizeTel(fd.get('tel')),
    email: (fd.get('email')||'').toString().trim(),
    kvkk:  !!fd.get('kvkk')
  };

  
  if(!payload.ad){ alert('LÃ¼tfen adÄ±nÄ±zÄ± giriniz.'); return; }
  if(!payload.tel){ alert('LÃ¼tfen geÃ§erli bir telefon giriniz.'); return; }
  if(!payload.email){ alert('LÃ¼tfen e-posta adresinizi giriniz.'); return; }
  if(payload.email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(payload.email)){
    alert('LÃ¼tfen geÃ§erli bir e-posta giriniz.'); return;
  }
  if(!payload.kvkk){ alert('LÃ¼tfen KVKK onayÄ±nÄ± iÅŸaretleyiniz.'); return; }

  const btn = form.querySelector('.cb-gonder');
  if(btn){ btn.disabled = true; btn.textContent = 'GÃ¶nderiliyor...'; }

  try{
    await this.kaydetGeriArama(payload);
    const balon = form.closest('.balon');
    if(balon) balon.innerHTML = `<div class="gb-not">TeÅŸekkÃ¼rler! En kÄ±sa sÃ¼rede sizi arayacaÄŸÄ±z.</div>`;
  }catch(err){
    
    alert(err.message || 'ÃœzgÃ¼nÃ¼z, bir sorun oluÅŸtu. LÃ¼tfen tekrar deneyin.');
    if(btn){ btn.disabled = false; btn.textContent = 'NumaramÄ± bÄ±rak'; }
  }
});

}

_normalizeTel(input){
  if(!input) return '';
  let s = String(input).replace(/[^\d+]/g,'');
  if(/^0\d{10}$/.test(s)) s = '+9' + s;          
  if(/^\d{10,11}$/.test(s)) s = '+90' + s.slice(-10);
  if(!/^\+?\d{10,15}$/.test(s)) return '';
  return s;
}

async kaydetGeriArama(data){
  const url = this.ayar?.callbackApi || '/wp-json/ez/v1/callback';
  const headers = {'Content-Type':'application/json'};
  if(this.ayar?.wpNonce){ headers['X-WP-Nonce'] = this.ayar.wpNonce; }

  const res = await fetch(url, {
    method:'POST',
    headers,
    body: JSON.stringify({ ...data, page: location.href, source: 'ez-faq-chat' }),
    credentials: 'same-origin' 
  });

  
  const text = await res.text();
  let json = null; try { json = JSON.parse(text); } catch(_) {}

  if(!res.ok){
    
    let msg = (json && json.error) ? json.error :
              (res.status === 403 ? 'EriÅŸim engellendi (403). GÃ¼venlik eklentisi engelliyor olabilir.' :
               res.status === 404 ? 'Callback endpoint bulunamadÄ± (404). Route kaydÄ± Ã§alÄ±ÅŸmÄ±yor olabilir.' :
               res.status === 400 ? 'Eksik/GeÃ§ersiz veri (400).' :
               'Ä°ÅŸlem sÄ±rasÄ±nda bir hata oluÅŸtu.');
    throw new Error(msg);
  }

  if(!json?.ok){
    throw new Error((json && json.error) ? json.error : 'Beklenmeyen yanÄ±t alÄ±ndÄ±.');
  }
  return true;
}

altaKaydir(opts={force:false}){
  const el = this.$kaydir; if(!el) return;

  
  const should = opts.force || this._yakindaAlttaMi(el);
  if(!should) return;

  const doScroll = ()=>{
    
    el.scrollTop = el.scrollHeight;
    try{
      el.scrollTo({ top: el.scrollHeight, behavior:'smooth' });
    }catch(_){}
  };

  
  requestAnimationFrame(()=> requestAnimationFrame(doScroll));
}

_yakindaAlttaMi(el){
  const kalan = el.scrollHeight - el.clientHeight - el.scrollTop;
  return kalan < 64; 
}

      ac(){ this.classList.add('acik'); this.$panel.setAttribute('aria-hidden','false'); }          
      kapa(){ this.classList.remove('acik'); this.$panel.setAttribute('aria-hidden','true'); }      
anaMenuyeDon(){
  this.durum.gorunum = 'ana';
  this.geriButonGuncelle();

  
  if(this._typingNode){ try{ this._typingNode.remove(); }catch(_){} this._typingNode = null; }

  this.karsilamaEkle();

  
  this.altaKaydir({ force: true });

  
  requestAnimationFrame(()=> this.altaKaydir({ force: true }));
}
      geriButonGuncelle(){ if(!this.$anaMenu) return; this.$anaMenu.disabled = this.durum.gorunum==='ana'; }    
     
      baslatGecikmeliIpucu(){
  
  const HIDE_MS = Number(this.ayar?.hintHideMs ?? 15000);
  const SHOW_MS = Number(this.ayar?.hintShowMs ?? 15000);

  
  clearTimeout(this._hintTimer);
  clearTimeout(this._hintHideTimer);

  
  const schedule = (delay) => {
    clearTimeout(this._hintTimer);
    this._hintTimer = setTimeout(() => {
      
      if (!this.classList.contains('acik')) {
        this.ipucuGoster();
      }

      clearTimeout(this._hintHideTimer);
      this._hintHideTimer = setTimeout(() => {
        this.ipucuGizle();
        
        schedule(HIDE_MS);
      }, SHOW_MS);
    }, delay);
  };

  
  schedule(HIDE_MS);

  
  const closeBtn = this.$hint?.querySelector?.('.hint-close');
  if (closeBtn && !closeBtn._bound) {
    closeBtn.addEventListener('click', (e) => {
      e.stopPropagation?.();
      this.ipucuGizle();
      clearTimeout(this._hintTimer);
      clearTimeout(this._hintHideTimer);
      schedule(HIDE_MS);
    });
    
    closeBtn._bound = true;
  }
};

ipucuGoster(){
  this.$hint?.classList.add('goster');
};

ipucuGizle(){
  this.$hint?.classList.remove('goster');
  clearTimeout(this._hintHideTimer);
};

      
geriBildirimSatir(){
  
  const satir = document.createElement('div');
  satir.className = 'satir geri-satir';

  
  const bar = document.createElement('div');
  bar.className = 'geri-bar';

  
  const label = document.createElement('div');
  label.className = 'gb-label';
  label.textContent = 'Bu cevap size yardÄ±mcÄ± oldu mu?';
  bar.appendChild(label); 

  
  const btnEvet = document.createElement('button');
  btnEvet.type = 'button';
  btnEvet.className = 'gb-inline gb-yes';
  btnEvet.innerHTML = `
  <img class="gb-ico" src="https://emojigraph.org/media/apple/check-mark-button_2705.png" alt="" aria-hidden="true">
  <span>Evet, yardÄ±mcÄ± oldu</span>
`;

  const btnHayir = document.createElement('button');
  btnHayir.type = 'button';
  btnHayir.className = 'gb-inline gb-no';
  btnHayir.innerHTML = `
  <img class="gb-ico" src="https://emojigraph.org/media/apple/cross-mark_274c.png" alt="" aria-hidden="true">
  <span>Temsilciye baÄŸlan</span>
`;
  bar.append(btnEvet, btnHayir); 
  satir.appendChild(bar);
  this.$mesajlar.appendChild(satir);
  this.altaKaydir();

  
  btnEvet.addEventListener('click', ()=>{
    bar.innerHTML = `<div class="gb-not">TeÅŸekkÃ¼rler! Geri dÃ¶nÃ¼ÅŸÃ¼nÃ¼z bizim iÃ§in Ã§ok deÄŸerli.</div>`;
  });

  btnHayir.addEventListener('click', ()=>{
    label.textContent = 'Hangi birime baÄŸlanmak istersiniz?';

    const teknik = document.createElement('button');
    teknik.type = 'button';
    teknik.className = 'gb-inline';
    teknik.textContent = 'ğŸ› ï¸ Teknik Destek';

    const satis = document.createElement('button');
    satis.type = 'button';
    satis.className = 'gb-inline';
    satis.textContent = 'ğŸ›’ SatÄ±ÅŸ Destek';

    const go = (link)=>{
      try{ window.open(link, '_blank', 'noopener'); }catch(e){}
      bar.innerHTML = `<div class="gb-not">CanlÄ± destek penceresi aÃ§Ä±ldÄ±. Buradan yazmaya devam edebilirsin.</div>`;
    };

    teknik.addEventListener('click', ()=> go(this.ayar?.iletisim?.teknikLink));
    satis .addEventListener('click', ()=> go(this.ayar?.iletisim?.satisLink));

    
    
    bar.replaceChildren(label, teknik, satis);
  });
}
    }
    customElements.define('ez-faq-chat', EZSSSohbet);        

    function htmlKacir(s){
      return String(s).replace(/[&<>"']/g, m=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[m]));  
    }
    function derinBirlestir(hedef, kaynak){
      const c={...hedef};                                 
      for(const k in kaynak){
        if(kaynak[k] && typeof kaynak[k]==='object' && !Array.isArray(kaynak[k])) c[k]=derinBirlestir(c[k]||{}, kaynak[k]);
        else c[k]=kaynak[k];
      }
      return c;
    }
    window.sohbetiBaslat = function(ayar){              
      window.__EZ_SOHBET_AYAR__ = ayar||{};             
      const el = document.querySelector('ez-faq-chat');    
      if(el){ el.ayarla(window.__EZ_SOHBET_AYAR__); el.ciz(); }    
      return el;
    }
  })();

const WP_NUMARA_TEKNIK = '905367771277';   
const WP_NUMARA_SATIS  = '905336009045';   
const WP_MESAJ_TEKNIK  = 'Merhaba, ElectroZirve mÃ¼ÅŸteri temsilcisi ile gÃ¶rÃ¼ÅŸmek istiyorum.';
const WP_MESAJ_SATIS  = 'Merhaba, ElectroZirve mÃ¼ÅŸteri temsilcisi ile gÃ¶rÃ¼ÅŸmek istiyorum.';

const WP_LINK_TEKNIK   = `https://wa.me/${WP_NUMARA_TEKNIK}?text=${encodeURIComponent(WP_MESAJ_TEKNIK)}`;
const WP_LINK_SATIS    = `https://wa.me/${WP_NUMARA_SATIS}?text=${encodeURIComponent(WP_MESAJ_SATIS)}`;

const kategoriler = [
  { ad: 'Hizmetlerimiz ğŸ“ˆ', sss: [
  { s:'Hangi hizmetleri sunuyorsunuz?', c: `
    <ul>
      <li><strong>Projelendirme Hizmeti</strong></li>
      <li><strong>Toptan ÃœrÃ¼n SatÄ±ÅŸÄ±</strong></li>
      <li><strong>Perakende ÃœrÃ¼n SatÄ±ÅŸÄ±</strong></li>
      <li><strong>Montaj &amp; Kurulum Hizmeti</strong></li>
    </ul>`},

  { s:'Hangi kullanÄ±m alanlarÄ±na Ã§Ã¶zÃ¼m sunuyorsunuz?', c: `
    <ul>
      <li>Villalar ve konut sistemleri</li>
      <li>Marin/tekne enerji sistemleri</li>
      <li>Karavan ve mobil uygulamalar</li>
      <li>Ã‡iftlik &amp; tarÄ±msal uygulamalar</li>
      <li>Tiny house Ã§Ã¶zÃ¼mleri</li>
      <li>VIP araÃ§ enerji paketleri</li>
      <li>Ofis ve ticarethaneler</li>
    </ul>`},

  { s:'Toplu Ã¼rÃ¼n alÄ±mÄ± yapabilir miyim?', c: `
    <p>Evet, toptan satÄ±ÅŸ yapÄ±yoruz. Fiyat alma iÅŸlemleri iÃ§in
    <a href="https://electrozirve.com/iletisim/" target="_blank" rel="noopener">resmi sitemiz Ã¼zerinden</a>
    ekibimizle iletiÅŸime geÃ§ebilirsiniz.</p>`},

  { s:'Kurulum hizmetini kim gerÃ§ekleÅŸtiriyor?', c: `
    <p>Marmara ve Ã§evresinde montajÄ± kendi ekiplerimiz yÃ¼rÃ¼tÃ¼r; diÄŸer illerde sertifikalÄ± Ã§Ã¶zÃ¼m ortaklarÄ±mÄ±z ile kurulum gerÃ§ekleÅŸtiriyoruz.</p>`},

  { s:'SatÄ±ÅŸ sonrasÄ± teknik destek saÄŸlÄ±yor musunuz?', c: `
    <p>Evet. ÃœrÃ¼nÃ¼ aldÄ±ktan sonra, gerek montaj gerek teknik bilgi ihtiyacÄ±nÄ±z olduÄŸunda mÃ¼hendis ekibimiz sorularÄ±nÄ±zÄ± yanÄ±tlar.
    Sorun Ã§Ã¶zÃ¼mÃ¼ ve yÃ¶nlendirme iÃ§in telefon/e-posta kanallarÄ±mÄ±z aktif olarak Ã§alÄ±ÅŸmaktadÄ±r.</p>
    <p>Garanti sÃ¼reÃ§lerinde Ã¼retici koÅŸullarÄ± ile birlikte kendi servis prosedÃ¼rlerimiz iÅŸler; parÃ§a deÄŸiÅŸimi ve log testi gibi adÄ±mlarÄ± ekiplerimiz takip eder.</p>`},

  { s:'Bayilik ya da distribÃ¼tÃ¶rlÃ¼k veriyor musunuz?', c: `
    <p>Evet. TÃ¼rkiyeâ€™de 20 ÅŸehirde bulunan 40â€™Ä± aÅŸkÄ±n bayi ve satÄ±ÅŸ noktasÄ± sayÄ±mÄ±zÄ± 81 ile Ã§Ä±karmayÄ± hedefliyoruz!
    Bayilik baÅŸvurusu iÃ§in <a href="https://electrozirve.com/bayilik/" target="_blank" rel="noopener">bu forma</a> tÄ±klayÄ±p baÅŸvuru yapabilirsiniz.</p>`}
]},

{ ad: 'ÃœrÃ¼nler ğŸ“¦', sss: [
  { s:'Hangi Ã¼rÃ¼n gruplarÄ±nÄ±z mevcut?', alt: [

{ s:'GÃ¼neÅŸ Panelleri', alt:[
  { s:'Monokristal ve polikristal paneller arasÄ±ndaki farklar nelerdir?', 
    c:`<p><a href="https://electrozirve.com/apex-monokristal-gunes-panelleri/" target="_blank" rel="noopener">Monokristal paneller</a> tek kristal yapÄ±sÄ± sayesinde daha yÃ¼ksek verim ve daha iyi dÃ¼ÅŸÃ¼k Ä±ÅŸÄ±k performansÄ± sunar; <a href="https://electrozirve.com/apex-polikristal-gunes-panelleri/" target="_blank" rel="noopener">polikristal paneller</a> daha ekonomik olabilir ancak verimleri genelde daha dÃ¼ÅŸÃ¼ktÃ¼r.</p>`},
  { s:'Half-Cut teknolojisi ne iÅŸe yarar?', 
    c:`<p><a href="https://electrozirve.com/monokristal-gunes-paneli/" target="_blank" rel="noopener">Half-Cut paneller</a> hÃ¼crelerin ikiye bÃ¶lÃ¼nmesiyle akÄ±m azalÄ±r, Ä±sÄ±nma ve kayÄ±plar dÃ¼ÅŸer; kÄ±smi gÃ¶lgede daha stabil Ã¼retim ve genel verim artÄ±ÅŸÄ± saÄŸlar.</p>`},
  { s:'GÃ¼neÅŸ paneli verimliliÄŸini nasÄ±l artÄ±rabilirim?', 
    c:`<p>GÃ¼neÅŸ panellerinde verimliliÄŸi artÄ±rmak iÃ§in gÃ¶lgeyi engellemek, uygun aÃ§Ä±/yÃ¶n seÃ§mek, dÃ¼zenli temizlik yapmak, kaliteli kablolama kullanmak ve doÄŸru inverter/MPPT seÃ§mek gerekir.</p>`},
  { s:'GÃ¼neÅŸ panellerinizin garanti sÃ¼resi ne kadardÄ±r?', 
    c:`<p>GÃ¼neÅŸ panellerimiz <strong>10 yÄ±l</strong> Ã¼rÃ¼n garantisi + <strong>25 yÄ±l</strong> performans garantisi (tipik: 25. yÄ±l sonunda %80 verimlilik taahhÃ¼dÃ¼) ile sunulmaktadÄ±r.</p>`},
  { s:'GÃ¼neÅŸ panellerimizi incelemek iÃ§in tÄ±klayÄ±n', 
    c:`<img src="x" style="display:none" onerror="try{window.open('https://electrozirve.com/gunes-panelleri/','_blank','noopener');}catch(e){};var satir=this.closest('.satir');if(satir)satir.remove();">` }
]},

{ s:'Ä°nverterler', alt:[
  { s:'AkÄ±llÄ± inverter ile klasik inverter farkÄ± nedir?', 
    c:`<p><a href="https://electrozirve.com/akilli-inverterler/" target="_blank" rel="noopener">AkÄ±llÄ± inverterler</a> iÃ§erisinde solar ÅŸarj Ã¶zelliÄŸi, AC ÅŸarj Ã¶zelliÄŸi ve DC elektriÄŸi AC elektriÄŸe Ã§evirici (inverter) Ã¶zelliÄŸi bulunur; Ã§ok Ã¶zellikli kompakt Ã¼rÃ¼nlerdir. <a href="https://electrozirve.com/tam-sinus-inverterler/" target="_blank" rel="noopener">Klasik inverter</a> ise yalnÄ±zca DC elektriÄŸi AC elektriÄŸe dÃ¶nÃ¼ÅŸtÃ¼rÃ¼r; solar/AC ÅŸarj gibi diÄŸer iÅŸlevler iÃ§in ayrÄ±ca cihazlar gerekir.</p>`},
  { s:'AkÄ±llÄ± inverter modelleriniz ve markalarÄ±nÄ±z nelerdir?', 
    c:`<p>Kendi markalarÄ±mÄ±z (<strong>Apex</strong> / <strong>NP Power</strong>) ve partner markalarÄ±n kombinasyonlarÄ± mevcuttur. Bu inverterler genelde hibrit (inverter + ÅŸarj yÃ¶netimi) yeteneklidir; saf sinÃ¼s Ã§Ä±kÄ±ÅŸ, DC-AC dÃ¶nÃ¼ÅŸÃ¼m, MPPT regÃ¼lasyonu ve farklÄ± Ã§alÄ±ÅŸma modlarÄ± sunar.</p>`},
  { s:'Hibrit inverter ne iÅŸe yarar?', 
    c:`<p>AkÃ¼lÃ¼ (enerji depolamalÄ±) ve akÃ¼sÃ¼z Ã§alÄ±ÅŸabilen inverterlere <a href="https://electrozirve.com/apex-pro-4-2-kw-hybrid-akilli-inverter/" target="_blank" rel="noopener">hybrid inverter</a> denir.</p>`},
  { s:'Modifiye sinÃ¼s mÃ¼, tam sinÃ¼s mÃ¼?', 
    c:`<p><a href="https://electrozirve.com/tam-sinus-inverterler/" target="_blank" rel="noopener">Tam sinÃ¼s inverterler</a>; motor, buzdolabÄ± ve hassas elektronikler iÃ§in gÃ¼venlidir. <a href="https://electrozirve.com/modifiye-sinus-inverter/" target="_blank" rel="noopener">Modifiye sinÃ¼s inverterler</a> daha ekonomiktir ancak Ä±sÄ±nma, gÃ¼rÃ¼ltÃ¼ ve verimsizlik yaratabilir.</p>`},
  { s:'Ä°nverter kapasitesi nasÄ±l belirlenir?', 
    c:`<p>Ä°nverter kapasitesi, eÅŸzamanlÄ± Ã§alÄ±ÅŸan cihazlarÄ±n tepe gÃ¼cÃ¼ toplanarak, motorlu yÃ¼klerde kalkÄ±ÅŸ payÄ± eklenerek ve %20â€“30 emniyet marjÄ± bÄ±rakÄ±larak belirlenir.</p>`},
  { s:'Ä°nverterlerimizi incelemek iÃ§in tÄ±klayÄ±n', 
    c:`<img src="x" style="display:none" onerror="try{window.open('https://electrozirve.com/inverter/','_blank','noopener');}catch(e){};var satir=this.closest('.satir');if(satir)satir.remove();">`}
]},

{ s:'AkÃ¼ler', alt:[
  { s:'Jel akÃ¼ ile LiFePOâ‚„ akÃ¼ arasÄ±ndaki fark nedir?', 
    c:`<p><a href="https://electrozirve.com/lityum-akuler/" target="_blank" rel="noopener">LiFePOâ‚„ akÃ¼ler</a> daha hafif, derin deÅŸarja dayanÄ±klÄ± ve uzun Ã¶mÃ¼rlÃ¼dÃ¼r; 
    <a href="https://electrozirve.com/jel-akuler/" target="_blank" rel="noopener">jel akÃ¼ler</a> daha ekonomiktir fakat dÃ¶ngÃ¼ Ã¶mrÃ¼ ve kullanÄ±labilir kapasite daha dÃ¼ÅŸÃ¼ktÃ¼r.</p>`},

  { s:'LiFePOâ‚„ akÃ¼lerinizin avantajlarÄ± nelerdir?', 
    c:`<p><a href="https://electrozirve.com/akuler/" target="_blank" rel="noopener">LiFePOâ‚„ akÃ¼ler;</a></p>
    <ul>
      <li>Uzun Ã¶mÃ¼rlÃ¼dÃ¼r ve yÃ¼ksek Ã§evrim sayÄ±sÄ±na sahiptir.</li>
      <li>Daha hafif yapÄ±sÄ± sayesinde taÅŸÄ±nabilirliÄŸi yÃ¼ksektir.</li>
      <li>HÄ±zlÄ± tepki ve ÅŸarj/deÅŸarj kabiliyeti vardÄ±r.</li>
      <li>DÃ¼ÅŸÃ¼k kaÃ§ak ve Ä±sÄ±l bozunma riski bulunur.</li>
    </ul>`},

  { s:'Derin deÅŸarj nedir, neden Ã¶nemlidir?', 
    c:`<p><strong>Derin deÅŸarj</strong>, akÃ¼nÃ¼n kapasitesinin bÃ¼yÃ¼k kÄ±smÄ±nÄ±n boÅŸaltÄ±lmasÄ±dÄ±r. 
    SÄ±k derin deÅŸarj, kurÅŸun kimyada Ã¶mrÃ¼ kÄ±saltÄ±r; 
    LiFePOâ‚„ akÃ¼ler bu aÃ§Ä±dan daha dayanÄ±klÄ±dÄ±r.</p>`},

  { s:'AkÃ¼nÃ¼n Ã¶mrÃ¼nÃ¼ korumak iÃ§in nelere dikkat edilmeli?', 
    c:`<p>AkÃ¼lerin Ã¶mrÃ¼nÃ¼ korumak iÃ§in doÄŸru ÅŸarj profili, uygun sÄ±caklÄ±k, derin deÅŸarjdan kaÃ§Ä±nma ve dÃ¼zenli izleme Ã¶nemlidir.</p>`},

  { s:'AkÃ¼lerimizi incelemek iÃ§in tÄ±klayÄ±n', 
    c:`<img src="x" style="display:none" onerror="try{window.open('https://electrozirve.com/akuler/','_blank','noopener');}catch(e){};var satir=this.closest('.satir');if(satir)satir.remove();">` }
]},

{ s:'AkÃ¼ Åarj CihazlarÄ±', alt:[
  { s:'AC-DC ve DC-DC ÅŸarj cihazlarÄ± arasÄ±ndaki fark nedir?', 
    c:`<p><a href="https://electrozirve.com/ac-dc-aku-sarj-cihazlari/" target="_blank" rel="noopener">AC-DC ÅŸarj cihazlarÄ±</a> ÅŸehir ÅŸebekesinden, 
    <a href="https://electrozirve.com/dc-dc-aku-sarj-cihazlari/" target="_blank" rel="noopener">DC-DC ÅŸarj cihazlarÄ±</a> ise alternatÃ¶r veya baÅŸka bir DC kaynaktan akÃ¼yÃ¼ doÄŸru profilde ÅŸarj eder.</p>`},

  { s:'Åarj cihazÄ± seÃ§erken nelere dikkat etmeliyim?', 
    c:`<p>Åarj cihazÄ± seÃ§erken akÃ¼ kimyasÄ± (LiFePOâ‚„/jel), voltaj, gerekli akÄ±m, sÄ±caklÄ±k kompanzasyonu ve korumalar dikkate alÄ±nmalÄ±dÄ±r.</p>`},

  { s:'Åarj sÃ¼resi nasÄ±l hesaplanÄ±r?', 
    c:`<p><strong>Åarj sÃ¼resi</strong> â‰ˆ AkÃ¼ kapasitesi (Ah) Ã— 1.2 / Åarj akÄ±mÄ± (A) formÃ¼lÃ¼yle hesaplanÄ±r.</p>`},

  { s:'Åarj cihazÄ± akÃ¼ye zarar verir mi?', 
    c:`<p>DoÄŸru ÅŸarj cihazÄ± akÃ¼ye zarar vermez. YanlÄ±ÅŸ voltaj/akÄ±m uygulamalarÄ± zarar verebilir.</p>`},

  { s:'Åarj cihazlarÄ±mÄ±zÄ± incelemek iÃ§in tÄ±klayÄ±n', 
    c:`<img src="x" style="display:none" onerror="try{window.open('https://electrozirve.com/aku-sarj-cihazlari/','_blank','noopener');}catch(e){};var satir=this.closest('.satir');if(satir)satir.remove();">` }
]},

{ s:'Åarj Kontrol CihazlarÄ±', alt:[
  { s:'MPPT ve PWM arasÄ±ndaki fark nedir?', 
    c:`<p><a href="https://electrozirve.com/mppt-solar-sarj-kontrol-cihazlari/" target="_blank" rel="noopener">MPPT cihazlarÄ±</a> panelin maksimum gÃ¼Ã§ noktasÄ±nÄ± takip ederek daha yÃ¼ksek Ã¼retim saÄŸlar; 
    <a href="https://electrozirve.com/pwm-solar-sarj-kontrol-cihazlari/" target="_blank" rel="noopener">PWM cihazlarÄ±</a> daha basit ve ekonomiktir.</p>`},

  { s:'Åarj kontrol cihazÄ± neden gereklidir?', 
    c:`<p><a href="https://electrozirve.com/solar-sarj-kontrol-cihazlari/" target="_blank" rel="noopener">Åarj kontrol cihazÄ±</a>, panel ile akÃ¼ arasÄ±nda voltaj/akÄ±mÄ± yÃ¶neterek akÃ¼ Ã¶mrÃ¼nÃ¼ uzatÄ±r.</p>`},

  { s:'GÃ¼nlÃ¼k enerji Ã¼retimi nasÄ±l izlenir?', 
    c:`<p>Enerji Ã¼retimi MPPT/PWM cihazlarÄ±nÄ±n ekranÄ± Ã¼zerinden izlenebilir.</p>`},

  { s:'Ä°nverter ile entegrasyon mÃ¼mkÃ¼n mÃ¼?', 
    c:`<p>Evet. Hibrit inverterlerde MPPT entegredir; ayrÄ± sistemlerde de senkronize Ã§alÄ±ÅŸabilir.</p>`},

  { s:'Åarj kontrol cihazlarÄ±mÄ±zÄ± incelemek iÃ§in tÄ±klayÄ±n', 
    c:`<img src="x" style="display:none" onerror="try{window.open('https://electrozirve.com/solar-sarj-kontrol-cihazlari/','_blank','noopener');}catch(e){};var satir=this.closest('.satir');if(satir)satir.remove();">` }
]}

  ]},

  { s:'ÃœrÃ¼nleriniz CE ve TSE belgelerine sahip mi?', c:`<p>Evet, tÃ¼m Ã¼rÃ¼nlerimiz <strong>CE</strong> ve <strong>TSE</strong> sertifikalarÄ±na sahiptir.</p>`},

  { s:'Stok ve teslimat sÃ¼resi ne kadardÄ±r?', c:`<p>Stok durumunu Ã¼rÃ¼n sayfalarÄ±mÄ±zda <em>â€œStoktaâ€</em>, <em>â€œ5 adetten azâ€</em> veya <em>â€œStokta yokâ€</em> ÅŸeklinde gÃ¶rebilirsiniz.</p>
    <p>Teslimatlar stok durumuna baÄŸlÄ± olarak genellikle <strong>2â€“7 iÅŸ gÃ¼nÃ¼</strong> iÃ§inde yapÄ±lÄ±r (ÅŸehir iÃ§i daha hÄ±zlÄ±dÄ±r). BÃ¼yÃ¼k sipariÅŸlerde tedarik sÃ¼resi uzayabilir; projeye Ã¶zel sipariÅŸlerde <strong>3â€“5 hafta</strong> gerekebilir.</p>`}

]},
  { ad: 'KeÅŸif & Randevu ğŸ”', sss: [
  { s:'NasÄ±l keÅŸif randevusu alabilirim?', c: `
    <p>En hÄ±zlÄ± yol, <a href="https://electrozirve.com/iletisim/" target="_blank" rel="noopener">iletiÅŸim formunu</a> doldurmak veya merkez hattÄ±mÄ±zÄ± aramaktÄ±r. BaÅŸakÅŸehir ofisimizden size uygun tarih-saat planlÄ±yoruz. Talebiniz sonrasÄ± ekibimiz Ã¶nce kÄ±sa bir Ã¶n gÃ¶rÃ¼ÅŸme yapar, ardÄ±ndan keÅŸif ekibimiz sahaya Ã§Ä±kar.</p>`},

  { s:'TÃ¼rkiye genelinde keÅŸif hizmetiniz var mÄ±?', c: `
    <p>Marmara BÃ¶lgesi iÃ§in keÅŸifleri doÄŸrudan kendi mÃ¼hendis ve teknisyenlerimiz ile yapÄ±yoruz. TÃ¼rkiye genelinde ise Ã§Ã¶zÃ¼m ortaklarÄ±mÄ±z aracÄ±lÄ±ÄŸÄ±yla keÅŸif hizmeti saÄŸlÄ±yoruz.</p>`},

  { s:'KeÅŸif hizmetiniz Ã¼cretli mi?', c: `
    <p>Standart Ã§atÄ±/arsa keÅŸifleri <strong>Ã¼cretsizdir</strong>.</p>`}
]},

  { ad: 'Garanti & Destek ğŸ¤', sss: [
  { 
  s:'ÃœrÃ¼nlerinizin garanti sÃ¼resi nedir?', 
  c: `
    <ul>
      <li><strong>Jel akÃ¼lerimiz</strong>: 2 yÄ±l garantilidir.</li>
      <li><strong>Lityum akÃ¼lerimiz</strong>: 3â€“5 yÄ±l garantilidir.</li>
      <li><strong>Ä°nverterlerimiz</strong>: 2â€“3 yÄ±l garantilidir.</li>
      <li><strong>Åarj kontrol cihazlarÄ±mÄ±z</strong>: 2â€“3 yÄ±l garantilidir.</li>
      <li><strong>SÃ¼rÃ¼cÃ¼lerimiz</strong>: 2 yÄ±l garantilidir.</li>
    </ul>
    <p><em>Not:</em> Garanti sÃ¼releri Ã¼rÃ¼nden Ã¼rÃ¼ne deÄŸiÅŸiklik gÃ¶stermektedir.</p>`},

  { s:'Garanti kapsamÄ±nda neler yer alÄ±yor?', c: `
    <ul>
      <li>Fabrikasyon ve Ã¼retim kaynaklÄ± arÄ±zalar.</li>
      <li>Normal kullanÄ±m koÅŸullarÄ±nda oluÅŸan teknik sorunlar.</li>
      <li>ÃœrÃ¼nle birlikte verilen garanti belgesinde belirtilen kapsama dÃ¢hil olan bileÅŸenler.</li>
    </ul>`},

  { s:'ArÄ±zalÄ± Ã¼rÃ¼nÃ¼mÃ¼ nasÄ±l gÃ¶nderebilirim?', c: `
    <ol>
      <li>Ã–nce teknik destek hattÄ±mÄ±zla iletiÅŸime geÃ§iniz. Destek ekibimiz uzaktan arÄ±za tespiti yapar.</li>
      <li>Sahada Ã§Ã¶zÃ¼lemeyen durumlarda size bir iade/servis kodu verilir.</li>
      <li>ÃœrÃ¼nÃ¼ fatura/garanti belgesi ile birlikte merkezimize (BaÅŸakÅŸehir â€“ Ä°stanbul) veya yÃ¶nlendirdiÄŸimiz servis noktasÄ±na kargolarsÄ±nÄ±z.</li>
    </ol>`},

  { s:'Garanti dÄ±ÅŸÄ± onarÄ±m hizmetiniz var mÄ±?', c: `
    <p>Evet. Garanti sÃ¼resi bitmiÅŸ ya da kullanÄ±cÄ± kaynaklÄ± arÄ±zalarda <strong>Ã¼cretli onarÄ±m</strong> ve parÃ§a deÄŸiÅŸimi hizmeti veriyoruz. Maliyet, arÄ±za tespitinden sonra tarafÄ±nÄ±za bildirilir ve onayÄ±nÄ±z alÄ±nÄ±r.</p>`},

  { s:'Teknik destek hattÄ±nÄ±z hangi gÃ¼nler Ã§alÄ±ÅŸÄ±yor?', c: `
    <p>Teknik destek hattÄ±mÄ±z <strong>hafta iÃ§i 09:00â€“18:00</strong> saatleri arasÄ±nda hizmet vermektedir.</p>`},

  { s:'Garanti sÃ¼resi dolan Ã¼rÃ¼nler iÃ§in ne yapabilirim?', c: `
    <ul>
      <li>Ãœcretli servisimizden faydalanabilirsiniz.</li>
      <li>Ä°sterseniz Ã¼rÃ¼nÃ¼nÃ¼z, <strong>yenilenmiÅŸ Ã¼rÃ¼n programÄ±</strong> kapsamÄ±nda uygun fiyatlÄ± deÄŸiÅŸim seÃ§enekleriyle deÄŸerlendirilebilir.</li>
      <li>BÃ¼yÃ¼k kapasiteli projelerde, eski Ã¼rÃ¼nleri yeni seriyle deÄŸiÅŸtirme kampanyalarÄ± da dÃ¼zenliyoruz.</li>
    </ul>`}
]},

{ ad: 'Biz sizi arayalÄ±m ğŸ“ ', formKat: 'callback' }

];

  const isMobile = window.matchMedia('(max-width: 640px)').matches;
  const panelH = isMobile ? '58vh' : '70vh';

  sohbetiBaslat({
    sirketAdi:'ElectroZirve',
    baslik:'HÄ±zlÄ± YanÄ±t',
    yukseklik: panelH,           
    genislik:'480px',
    topIkonUrl:"https://electrozirve.de/wp-content/uploads/2025/09/robot_ikon.png",
    logoYolu:"https://electrozirve.de/wp-content/uploads/2025/09/logo.png",
    sohbetArkaPlanYolu:"https://electrozirve.de/wp-content/uploads/2025/09/arka_plan.png",
    kategoriler,
    iletisim:  {
      teknikLink: WP_LINK_TEKNIK,
      satisLink: WP_LINK_SATIS
    },
    hintMetni: 'ğŸ‘‹ Size yardÄ±mcÄ± olabileceÄŸim konuyu seÃ§ebilirsiniz.',
  hintGecikmeMs: 15000   
});

</script>

  
<style>
  #ez-hizli-destek{     
    position: fixed;
    right: 96px;             
    bottom: 28px;            
    padding: 10px 14px;
    background: #017a13;     
    color: #fff;
    border: 0;
    border-radius: 9999px;
    font: 600 14px/1.1 Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    display: flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 10px 24px rgba(0,0,0,.25);
    cursor: pointer;
    z-index: 10000;          
    user-select: none;
  }
  #ez-hizli-destek svg{ width:18px; height:18px }

  
  #ez-hizli-destek::after{
    content:"";
    position:absolute;
    right:-6px;             
    top:50%;
    transform:translateY(-50%);
    border-left:12px solid #017a13;  
    border-top:10px solid transparent;
    border-bottom:10px solid transparent;
  }

  
  @media (max-width:640px){
    #ez-hizli-destek{ right:84px; bottom:22px; padding:8px 12px; font-size:13px }
  }
</style>

<button id="ez-hizli-destek" type="button" aria-label="HÄ±zlÄ± Destek">
  
  
  HÄ±zlÄ± Destek
</button>

<script>
  (function(){
    const badge = document.getElementById('ez-hizli-destek');
    const chat  = document.querySelector('ez-faq-chat');

    if (!badge || !chat) return;

    
    badge.addEventListener('click', () => {
      if (typeof chat.ac === 'function') chat.ac();
      if (typeof chat.karsilamaGerekirse === 'function') chat.karsilamaGerekirse();
    });

    
    const sync = () => { badge.style.display = chat.classList.contains('acik') ? 'none' : 'flex'; };
    const mo = new MutationObserver(sync);
    mo.observe(chat, { attributes:true, attributeFilter:['class'] });
    sync(); 
  })();
</script>
</body> 
</html> 
